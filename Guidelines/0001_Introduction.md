<!--
NOTE: Requires Markdown Extra. See http://michelf.ca/projects/php-markdown/extra/
 --> 

#序章#
##これはなにか？##

このドキュメントは、C# 3.0、4.0、5.0 でコーディングする際の有用性と実用性の両方のガイドライン（とあなたが望むならコーディング標準）を提供する。もちろんあなたがこのようなドキュメントを作成した場合、あなたが説得して実践するべきである。このガイドラインは、[Aviva Solutions](http://www.avivasolutions.nl) で私たちが日々の仕事で行っていることの代表的なものなので安心して欲しい。もちろんすべてのガイドラインは明確な根拠をもっているわけではない。そのうちいくつかは、Aviva Solutions が選択したものである。

Visual Studio の[静的コード分析](http://msdn.microsoft.com/ja-jp/library/dd264939.aspx) （FxCop として知られる）と [StyleCop](http://stylecop.codeplex.com/) は、コンパイルされたアセンブリを分析することによって、自動的に多くのコーディングと設計ルールを強制することができる。それはコンパイル時または、日々のビルドの一部として継続するように構成することができる。このドキュメントは、追加ルールと推奨として追加することができるが、手引きサイトである [www.csharpcodingguidelines.com](http://www.csharpcodingguidelines.com) では、あなたの扱っているコードベースの種類に応じたコード分析のルールリストを提供する。

##なぜこのドキュメントを使うのか？##

いくつかのコーディングガイドラインは、望まないオーバーヘッドやクリエイティビティの制限に見えるかもしれないが、このアプローチはすでに長年にわたって価値を証明している。なぜか？なぜなら、すべての開発者が以下に該当するわけではないが

- 開発者は、それが変更されるよりも10倍以上読まれることに気づいている
- 開発者は、C#で構築したときの落とし穴になる可能性があることに気づいている
- 開発者は、IDisposableやLINQの遅延実行など.NET Frameworkを使った時の特定の規則になじむ
- 開発者は、セキュリティ、パフォーマンス、多言語対応などの側面で、特定のソリューションを使った時（あるいは使うのを避けること）のインパクトに気づいている
- すべての開発者が、元の開発者と同じく、精錬された（ではあるが抽象的な）ソリューションを理解することができるわけではないことを知っている

##基本原則##

私がコンサルタントとして作業していると多くの予測していないことがあり、それぞれ1つのガイドラインに値する。残念ながら、私はドキュメントが適切なサイズを維持する必要があると考えている。経験の浅い開発者が信じているものとは違い、このガイドラインに記述されていないからと言ってそれは大丈夫であることを意味するわけではない。

一般的にこのドキュメントで免罪にはならないようなきな臭いものは、同僚と議論して、コンテキストに関係なく、すべての状況に適用される基本原則に立ち返ってみる。それには以下のものが含まれている:

- The Principla of Least Surprise(最小の驚きの原則) は、ソリューションには人々が理解できないものや、間違った方向に入るものを含むべきではないことを意味する。
- Keep It Simple Stupid (KISSとして知られる) は、「もっとも単純な解放は十分な（最低限、機能する）ものよりよい」の冗談めいた言い方。
- You Ain’t Gonne Need It (YAGNIとして知られる)は、将来起こること（あなたはいつから将来を予測できる？）よりも現在の問題に対するソリューションを作成するように指示している。
- Don’t Repeat Yourself (DRYとして知られる)は、 [Rule of Three](http://lostechies.com/derickbailey/2012/10/31/abstraction-the-rule-of-three/)  ヒューリスティックを忘れずに、あなたのコードベースで重複を避けることを推奨している。

そのエレガントさとは無関係に、誰かのソリューションが、普通の開発者には複雑すぎたり、一般的じゃない振る舞いを公開したり、多くの将来の問題を引き起こす可能性がある場合、それは大幅に間違っているか再設計が必要である。

##どうやって始めればよい？##

- すべての開発者が少なくても一度はこのドキュメントをきちんと読むように依頼する。これは彼らにドキュメントに含まれるガイドラインの主旨を伝える。
- いくつかの [Quick Reference](http://www.csharpcodingguidelines.com/) のハードコピーが常に手元に存在していることを確認する。
- あなたの[プロジェクトチェックリスト](http://www.dennisdoomen.net/2010/03/alm-practices-5-checklists.html) にもっとも重要なコーディングガイドラインに含めて、あなたの[ピアレビュー](http://www.dennisdoomen.net/2010/02/tfs-development-practices-part-2-peer.html)での検証の一部に含める。
- どのCAルールをプロジェクトに含めるべきかを決めて、TFSチームサイトなどに書き留めるか、Visual Studio 2010/2012のカスタムルールセットを作成する。[手引きサイト](http://www.csharpcodingguidelines.com/)では、基幹業務アプリケーションと、フレームワークやクラスライブラリのような、より一般的なコードベースの両方に対するルールセットを提供している。
- あなたのドメインや会社特有の用語、名前、コンセプトをカスタム[コード分析ディクショナリ](http://msdn.microsoft.com/ja-jp/library/bb514188.aspx)に追加する。そうしないと、静的分析は内部辞書に含まれないフレーズ（の一部）を警告として報告してくる。
- リリースビルドの一部としてCAルールを検証するようにVisual Studioを構成する。それによって通常の開発とデバッグ作業を邪魔することはないが、Release構成に切り替えたときに実行することができる。
- 新しいコードがCA違反をしていないかを検証するためにプロジェクトのチェックリストにアイテムを追加して、完全にCAルール違反から防ぎたい場合は、[チェックインポリシー](http://msdn.microsoft.com/ja-jp/library/ms182075(v=vs.110).aspx)を使用する。
- [ReSharper](http://www.jetbrains.com/resharper/) は、インテリジェントなコード検証エンジンであり、いくつかの構成を行うことでコーディングガイドラインの多くの側面をすでにサポートしている。命名規則に一致しないコード（PascalやCamel case）を自動的にハイライトして、未使用のコードを検出し、その他多くのことをしてくれる。マウスボタンを一度クリック（か、それに対応するキーボードのショートカット）すると、それを修正してくれる。
- ReSharperはまた、あなたのクラスやインターフェイスのメンバーの概要を表示して、簡単にドラッグ・アンド・ドロップ操作で再配置できるファイル構造ウィンドウを持っている。
- [GhostDoc](http://submain.com/products/ghostdoc.aspx) を使うと、キーボードショートカットを使ってあらゆるメンバーのXMLコメントを生成することができる。これのすばらしい点は、MSDNスタイルのドキュメントに近いということである。しかしながら、このツールが入り口だけであることを勘違いしないように注意する必要がある。

##なぜこれを作ったのか？##

アイディアは、2002年にVic Hartog (Philips Medical Systems)と私がC# 1.0の[コーディング標準](http://www.tiobe.com/content/paperinfo/gemrcsharpcs.pdf)を作成する作業にアサインされたときに始まった。その後私は、定期的に経験や、コミュニティからのフィードバック、Visual Studio 2010の提供する新しいツールなどのサポートに応じてルールの追加、削除、変更を行ってきた。さらに、[Robert C. Martin](http://www.objectmentor.com/omTeam/martin_r.html)の本[Clean Code: A Handbook of Agile Software Craftsmanship](http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882) を読んだ後、私は彼のアイディアの大ファンになり、彼のテイストや経験則をガイドラインとして含めることを決定した。このドキュメントが彼の本を置き換えるものになると気づくかもしれない。私は心から、彼の推奨する背後にある根拠をきちんと理解するために本を読むことをお薦めする。

私はまた、シンプルなコーディングガイドラインに加えていくつかの設計ガイドラインを含めることを決めた。これは高いコードの品質に到達するために無視することができない重要な影響を持つものである。

##これはコーディング標準なのか？##
 
どのドキュメントは、プロジェクトが絶対にこれらのガイドラインを守らなくてはならないものとは位置づけておらず、どちらのガイドラインが他よりも重要であるとも言っていない。私たちは、彼ら自身でどのガイドラインが重要で、どれをプロジェクトでの使用からはずすべきか、疑問が生じたときに誰がコンサルタントなのか、どのレイアウトをソースコードで使用するべきかを決めることを推奨する。明らかにあなたが実際にコーディングを始める前に決めておくべきである。

あなたの決定を助けるために、それぞれのガイドラインに重要度を割り当てた:

![](images/1.png) あなたがスキップしてはいけない、すべての状況で適用すべきガイドライン

![](images/2.png) 強くお薦めするガイドライン

![](images/3.png) すべての状況で適用する必要はないが、推奨するガイドライン

一般的に、生成されたコードはコーディングガイドラインに準拠している必要はない。しかし、コードの生成に使用しているテンプレートの修正が可能であれば、可能な限り準拠したコードが生成できるように試してみる。

##フィードバックと免責事項##

このドキュメントは、多くのコミュニティメンバー、ブログ投稿、オンラインディスカッションと長年のC#での開発による貢献を使用して構築されている。もし疑問、コメント、提案がある場合、[dennis.doomen@avivasolutions.nl](mailto:dennis.doomen@avivasolutions.nl) 宛てのEメールか、[http://twitter.com/ddoomen](http://twitter.com/ddoomen) へのツイートで教えて欲しい。私は定期的に新しい洞察、経験、発言を元にこのドキュメントを改訂して、再発行しようと考えている。

これは単にC#コードに対する私の視点での最適な見解を反映しているため、Aviva Solutionsは、直接的、間接的に関わらず、このドキュメントのガイドラインによって生じた損害に対して一切の責任を負わない。

このドキュメントとクイックリファレンスガイドは、非商用目的と内部利用に限りコピー、適用、および再配布を許可する。Aviva Solutionsの許可を得ることなく、このドキュメントの再発行、または商業利用のためのいかなる適用、発行、配布を禁じる。日本語訳に関する疑問や質問、もしくは日本語でのフィードバックについては、本ドキュメントを翻訳した尾崎　義尚([yoshioms@gmail.com](yoshioms@gmail.com))  までメールをいただくか、[http://twitter.com/yoshioms](http://twitter.com/yoshioms) にツイートして欲しい。
